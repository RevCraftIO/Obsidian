プルリクエスト（PR）はGitHubの最も重要な機能の一つで、コードの変更を他の開発者にレビューしてもらい、メインコードベースに統合する前に議論する仕組みです。

## プルリクエストの基本概念

プルリクエストとは、あるブランチ（通常は機能開発やバグ修正用のブランチ）の変更を別のブランチ（通常はmainやdevelopなどのメインブランチ）に取り込む（マージする）ための提案です。

### メリット

- コードレビューによる品質向上
- 知識の共有と学習
- 変更履歴の明確化
- チームでの協力体制の強化

## プルリクエストの作成手順

### 準備段階

1. 作業用ブランチを作成して変更を加える

```bash
git checkout -b feature/new-feature
# ファイルを変更...
git add .
git commit -m "Add new feature: description"
```

2. リモートリポジトリにプッシュ

```bash
git push -u origin feature/new-feature
```

### GitHub上での操作

1. GitHubのリポジトリページを開く
2. 「Pull requests」タブをクリック
3. 「New pull request」ボタンをクリック
4. ベースブランチ（マージ先：通常はmain）と比較ブランチ（あなたの作業ブランチ）を選択
5. 「Create pull request」ボタンをクリック
6. タイトルと説明を入力
7. 「Create pull request」ボタンをクリック

### 効果的なPR説明の書き方

良いPR説明には以下の要素を含めましょう：

- **何を変更したか**: 変更の概要
- **なぜ変更したか**: 背景や理由
- **どのように変更したか**: 実装方法の概要
- **テスト方法**: 動作確認の手順
- **関連するIssue**: 対応するIssue番号（#123 の形式でリンクされる）
- **スクリーンショット**: UI変更がある場合は変更前後の画像

#### テンプレート例

```markdown
## 変更内容
ユーザー登録フォームにパスワード強度インジケーターを追加

## 背景・理由
セキュリティ向上のため、ユーザーがパスワードを入力する際に強度を視覚的に表示

## 実装方法
- zxcvbnライブラリを使用してパスワード強度を計算
- パスワード入力フィールドの下に強度バーを表示
- 強度に応じて色とテキストメッセージを変更

## テスト方法
1. ユーザー登録ページにアクセス
2. パスワードフィールドに様々な強度のパスワードを入力
3. インジケーターが適切に変化することを確認

## 関連Issue
Closes #42

## スクリーンショット
[変更前]
![変更前](https://example.com/before.png)

[変更後]
![変更後](https://example.com/after.png)
```

## レビュアーの割り当て

プルリクエストを作成したら、適切なレビュアーを割り当てることが重要です。

1. PR画面右側の「Reviewers」セクションから選択
2. プロジェクトによっては自動的にレビュアーが割り当てられる場合もある（CODEOWNERS機能）

## コードレビューの実施方法

### レビュアーとしての役割

1. PR詳細ページで「Files changed」タブを開く
2. コードを確認し、コメントを残す方法：
    - 特定の行にカーソルを合わせて「+」ボタンをクリック
    - 複数行を選択する場合は、Shiftキーを押しながら行番号をクリック
    - コメントを入力して「Add single comment」または「Start a review」をクリック

### レビューコメントの種類

1. **単純なコメント**: 質問や提案（承認には影響しない）
2. **変更リクエスト**: PRをマージする前に修正が必要
3. **承認**: 変更に問題がなくマージ可能

### 効果的なレビューコメントの書き方

- 具体的かつ建設的な内容を心がける
- 問題点だけでなく改善案も提示する
- コード規約やベストプラクティスを参照する
- ポジティブな点も指摘する
- コードの書き手ではなくコード自体にフォーカスする

#### 良いコメントの例

```
この正規表現は複雑で理解しにくいです。
String.prototype.split()を使って同じ結果を得られませんか？
例：`input.split(',').map(item => item.trim())`
```

#### 避けるべきコメントの例

```
この実装は良くないです。直してください。
```

## レビュー後の対応

### PRの作成者としての対応

1. コメントに返信する（同意/説明/質問など）
2. 必要に応じてコードを修正
3. 修正後、再度プッシュ

```bash
# 修正作業
git add .
git commit -m "Fix review comments: description"
git push
```

4. 変更リクエストがすべて解決されたことを確認

### コメント解決の方法

1. コメントに対して議論や修正が完了したら「Resolve conversation」をクリック
2. すべての会話が解決されたらレビュアーに再レビューを依頼

## PRのマージ

レビューが承認されたら、以下のいずれかの方法でマージできます：

1. **Merge commit**: 履歴にマージコミットが残る（デフォルト）
2. **Squash and merge**: すべての変更を1つのコミットにまとめる
3. **Rebase and merge**: 履歴を線形に保つ

### マージの手順

1. PR画面下部の「Merge pull request」ボタンをクリック
2. マージ方法を選択（リポジトリ設定により選択肢が制限される場合あり）
3. マージコミットメッセージを確認/編集
4. 「Confirm merge」をクリック

### マージ後のブランチ管理

マージ完了後は作業ブランチを削除するのが一般的です：

1. マージ完了後に表示される「Delete branch」ボタンをクリック
2. ローカルでも不要になったブランチを削除

```bash
git checkout main
git pull  # 最新の変更を取得
git branch -d feature/new-feature
```

## PRのベストプラクティス

### PRのサイズ

- **小さく保つ**: 理想的には200〜400行の変更
- 大きな機能は複数のPRに分割する
- 1つのPRで1つの機能や修正に集中する

### レビュープロセスの効率化

- PR作成前にセルフレビューを行う
- 自動テストやCI/CDツールを活用する
- コードフォーマッターやリンターを使用する
- Draft PRを活用して早期フィードバックを得る

### ドラフトPRの活用

作業途中でフィードバックが欲しい場合は「Draft Pull Request」を活用：

1. PR作成時に「Create draft pull request」を選択
2. 作業完了後「Ready for review」ボタンをクリックして正式なPRに変更

## 次のステップ

プルリクエストとコードレビューの基本を理解したら、次は[[Issues（課題管理）の活用]]について学びましょう。Issuesを使ってタスク管理を効率化する方法を理解することが重要です。