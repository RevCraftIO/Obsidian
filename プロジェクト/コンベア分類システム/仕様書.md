# コンベア分類システム 仕様書

## 1. システム概要

### 1.1 目的
- コンベアの機能（ユニット）を軸にした体系的な分類モデルの構築
- 設計ナレッジの可視化と共有促進
- 設計工数の削減と品質向上

### 1.2 システム構成
- アプリケーション種別：WPFデスクトップアプリケーション
- 開発環境：.NET 9.0
- データベース：PostgreSQL
- バージョン管理：Git

## 2. 機能仕様

### 2.1 データ管理機能
#### 2.1.1 コンベアモデル情報管理
- 機種名、型式、仕様情報の登録・編集
- 搭載ユニット情報の登録・編集
- バージョン管理（変更履歴の保持）

#### 2.1.2 ユニット情報管理
- ユニット種別の定義
- ユニット仕様情報の登録・編集
- ユニット間の関連性定義

### 2.2 分類機能
#### 2.2.1 分類ルール管理
- 分類軸の定義
  - 移送方向（縦移送、横移送）
  - 中間フレーム（あり、なし）
  - ローラー（標準、V形、標準大径、V形大径）
  - ゲート（あり、なし）
  - 求心装置・片寄装置（持ち上げ、クランプ、片寄、なし）
- ルール条件の設定
- ルールの優先順位設定

#### 2.2.2 自動分類エンジン
- 登録情報の解析
- 分類ルールの適用
- 分類結果の保存
- 分類履歴の管理

### 2.3 可視化機能
#### 2.3.1 グラフビュー
- ノード（コンベア）の表示
- エッジ（ユニット関連）の表示
- インタラクティブな操作
  - ドラッグ＆ドロップによるレイアウト調整
  - ズームイン/アウト
  - ノード選択時の詳細表示
- レイアウトの自動最適化

#### 2.3.2 ダッシュボード
- 分類統計情報の表示
- 分布グラフの表示
- 最近の更新情報

### 2.4 検索・フィルタ機能
- キーワード検索
- ユニット種別によるフィルタ
- モデル名によるフィルタ
- 複合条件検索

### 2.5 エクスポート機能
- Excel形式での出力
- 画像形式での出力
- レポート生成

### 2.6 ユーザー管理機能
- ユーザー登録・編集
- 権限管理（管理者/一般ユーザー）
- アクセスログ管理

## 3. 非機能要件

### 3.1 性能要件
- 画面表示：2秒以内
- 検索応答：1秒以内
- グラフ描画：3秒以内（100ノード以下）
- 同時接続ユーザー：50人

### 3.2 セキュリティ要件
- ユーザー認証
- アクセス権限管理
- データの暗号化
- ログ管理

### 3.3 運用要件
- バックアップ機能
- エラーログ管理
- システム監視
- パフォーマンスモニタリング

## 4. 画面設計

### 4.1 メイン画面
- メニューバー
- ツールバー
- ステータスバー
- メインコンテンツエリア

### 4.2 データ管理画面
- コンベアモデル一覧
- 登録・編集フォーム
- ユニット情報管理

### 4.3 分類設定画面
- 分類軸設定
- ルール定義
- 優先順位設定

### 4.4 グラフビュー画面
- グラフ表示エリア
- コントロールパネル
- 詳細情報パネル

### 4.5 検索・フィルタ画面
- 検索条件入力
- フィルタ設定
- 結果表示

## 5. データベース設計

### 5.1 テーブル構成
- コンベアモデル情報
- ユニット情報
- 分類ルール
- 分類結果
- ユーザー情報
- アクセスログ

### 5.2 リレーションシップ
- コンベアモデルとユニットの関連
- ユニット間の関連
- 分類ルールと分類結果の関連

## 6. 開発環境

### 6.1 開発ツール
- Visual Studio 2022
- Git
- PostgreSQL

### 6.2 使用ライブラリ
- CommunityToolkit.Mvvm
- Graph#またはSyncfusion Diagram
- Microsoft.Extensions.Hosting
- NLog

## 7. テスト計画

### 7.1 単体テスト
- 各機能の動作確認
- エラー処理の確認

### 7.2 結合テスト
- 機能間の連携確認
- データの整合性確認

### 7.3 システムテスト
- 全体動作の確認
- 性能要件の確認

## 8. 運用計画

### 8.1 導入計画
- ユーザートレーニング
- マニュアル作成
- 段階的な導入

### 8.2 保守計画
- 定期バックアップ
- パフォーマンス監視
- 障害対応手順

## 9. リスク対策

### 9.1 技術的リスク
- グラフビューの性能最適化
- データ量増加への対応
- セキュリティ対策

### 9.2 運用リスク
- ユーザー教育の徹底
- サポート体制の整備
- フィードバック収集と改善 